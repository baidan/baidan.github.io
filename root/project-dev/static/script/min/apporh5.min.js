"use strict";function APPCallH5(o,e){"string"==typeof e&&(e=JSON.parse(e)),1==o?(localStorage.isAccessToken=e.accessToken,loginH5(e.accessToken,!0)):9==o&&(e&&e.accessToken?(localStorage.isAccessToken=e.accessToken,loginH5(e.accessToken)):logoutH5())}function CallH5ToAPP(o,e,n,i){if(isAPP){var a={};a.url=window.location.href,a.data=null,e&&(a.data=e),isIOS?"1"==window.WKWebView?window.webkit.messageHandlers.H5CallAPP.postMessage(JSON.stringify({type:o,parameter:a})):native.H5CallAPP(o,JSON.stringify(a)):isAndroid&&AppTool.H5CallAPP(o,JSON.stringify(a))}else{if(i)return i();if(!n)return;window.location.href=domain+n}}function loginH5(o,e){$.ajax({url:domain+"/web/loginforwebapp",type:"GET",dataType:"json",async:!1,data:{accessToken:o,platform:"wechat"},success:function(o){if("0000"==o.retCode){if(window.isLogin=!0,localStorage.isLogin=!0,sessionStorage.apptoh5url)return void(window.location.href=sessionStorage.apptoh5url);e&&(window.location.href=window.location.href)}},error:function(o){alert("loginforwebapp error")}})}function logoutH5(){$.ajax({url:domain+"/web/quickloginout",type:"GET",dataType:"json",async:!1,data:{platform:"wechat"},success:function(o){"0000"==o.retCode&&(window.isLogin=!1,localStorage.isLogin=!1)},error:function(o){alert("quickloginout error")}})}function getQueryString(o){var e=new RegExp("(^|&)"+o+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n?(n[2].indexOf("%u")<0&&(n[2]=decodeURIComponent(n[2]).replace(/\\/g,"%")),xssEscape(unescape(n[2]))):null}function xssEscape(o){return"string"==typeof o?o.replace(/&(?![\w#]+;)|[<>"']/g,function(o){return{"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"}[o]}):o}var domain=window.location.protocol+"//"+window.location.hostname,search=window.location.search,useragent=navigator.userAgent;if(window.isAPP=!1,useragent.indexOf("ios_h5_zjcap")>-1||search.indexOf("ios_h5_zjcap")>-1?(window.isIOS=!0,window.isAPP=!0,window.WKWebView=getQueryString("WKWebView")):window.isIOS=!1,useragent.indexOf("android_h5_zjcap")>-1||search.indexOf("android_h5_zjcap")>-1||useragent.indexOf("android")>-1||search.indexOf("android")>-1?(window.isAndroid=!0,window.isAPP=!0):window.isAndroid=!1,-1!=search.indexOf("accessToken")){var at=search.match(/^\?(?:[\w&=]*)(accessToken=([0-9a-zA-Z]+))/);window.accessToken=at&&at[2],isAPP&&accessToken&&(localStorage.isAccessToken=accessToken,loginH5(accessToken))}