<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"><title>react test</title><link href="../../static/css/lib/mui.min.css" rel="stylesheet"></head><style>.completed{text-decoration:line-through}</style><body><header class="mui-bar mui-bar-nav"><h1 class="mui-title">react test</h1></header><div class="mui-content"><div><input id="input"> <span id="output"></span></div><button id="add">添加</button><div id="list"></div><div id="list2"></div></div></body><script src="../../static/script/lib/mui.min.js"></script><script src="../../static/script/lib/jquery-1.11.3.min.js"></script><script>var state={value:null},state1={items:[],id:0};!function(t,e,i){var n={init:function(){var t=this;this.render(),this.initPage();var i=n.createStore(state1);window.store=i,i.onUpdate("rootRender",function(i){console.log("获取的state===",i),t.render2(i,e("#list"))})},initPage:function(){var t=this;e("#input").on("keyup",function(){state.value=e(this).val().trim(),t.render()}),this.bind2()},bind2:function(){e("#add").on("click",function(t){var i=e("#input").val().trim();e("#input").val(""),state1.items.push({id:state1.id++,text:i,completed:!1}),store.setState(e.extend({},state1))}),e("#list").on("click",".item",function(){var t=parseInt(e(this).attr("id"));state1.items.forEach(function(e){e.id===t&&(e.completed=!e.completed)}),store.setState(e.extend({},state1))})},bind1:function(){e("#add").on("click",function(t){var i=e("#input").val().trim();e("#input").val(""),state1.items.push({id:state1.id++,text:i,completed:!1}),_this.render1()}),e("#list").on("click",".item",function(){var t=parseInt(e(this).attr("id"));state1.items.forEach(function(e){e.id===t&&(e.completed=!e.completed)}),_this.render1()})},render:function(){e("#output").html(state.value)},render1:function(){var t="<ul>"+state1.items.map(function(t){return'<li class="item + '+(t.completed?"completed":"")+'" id="'+t.id+'">('+t.id+") "+t.text+"</li>"}).join("")+"</ul>";e("#list").html(t)},render2:function(t,e){e.html(this.ItemsList({items:t.items}))},h2:function(t){return"<h2>"+t+"</h2>"},div:function(t){return"<div>"+t+"</div>"},header:function(t){this.div(this.h2(t))},ItemRow:function(t){return'<li class="'+(t.completed?" item completed":"item")+'">'+t.text+"</li>"},ItemsList:function(t){return"<ul>"+t.items.map(this.ItemRow).join("")+"</ul>"},createStore:function(t){function e(t){n.forEach(function(e){e.cb(t)})}var i=t||{},n=[];return{setState:function(t){i=t,e(t)},getState:function(){return i},onUpdate:function(t,e){n.push({name:t,cb:e})}}}};n.init()}(0,jQuery,mui)</script></html>